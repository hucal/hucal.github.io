<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Hive Plot vs Force Directed Layout</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="../apple-touch-icon.png">

        <link rel="stylesheet" href="../css/normalize.css">
        <link rel="stylesheet" href="../css/main.css">
        <link rel="stylesheet" href="../css/network.css">
        <link rel="stylesheet" href="hp_force.css">
        <script src="../js/vendor/modernizr-2.8.3.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <p><a href=http://hiveplot.net/>Hive Plot</a> and Force Layout brushing
        visualization.
        Click nodes and links on either vis.
        Data is randomly generated on page load.

        <p style="text-align:center"><button id="begin_tut">Begin tutorial</button></p>
        <div class="hfill"/>
        <br/>
        <table>
        <tr>
            <td/>
            <td>Nodes: <input id="node_count" type="number" min="0" value="40"> </td>
            <td>Links: <input id="link_count" type="number" min="0" value="80"> </td>
            <td/>
        </tr>
        <tr>
            <td><input id="draw_nodes" type="checkbox">draw nodes? </td>
            <td><input id="draw_force" type="checkbox">draw force layout? </td>
            <td>Axis assignment: <select id="axis_func">
                    <option value="a">(custom) by a</option>
                    <option value="b">(custom) by b</option>
                    <option value="deg">by degree</option>
                    <option value="cc">by clustering coeff.</option>
            </select></td>
            <td>Radius assignment: <select id="radius_func">
                    <option value="a">(custom) by a</option>
                    <option value="b">(custom) by b</option>
                    <option value="deg">by degree</option>
                    <option value="cc">by clustering coeff.</option>
            </select></td>
        </tr>
        </table>

        <p>To change graph config, use the query string. UI will be improved...</p>
        <p><a href=hp_force.html?nodes=10&links=40>nodes=10, links=40</a></p>
        <p><a href=hp_force.html?nodes=100&links=100>nodes=100, links=100</a></p>
        <p><a href=hp_force.html?nodes=900&links=400&draw_force=0>nodes=900, links=400, and
        don't draw force layout</a></p>
        <p><a href=hp_force.html?nodes=1000&links=3000&draw_force=0&draw_nodes=0>nodes=1000, links=3000,
        don't draw HP nodes, and don't draw Force Layout</a></p>
        <div id="node-stats"></div>
        <div id="vis"></div>
        <div id="vis_force"></div>
        <div class="hfill"/>
        <br/>
        <h2>Data dump</h2>
        <div id="data-dump"></div>

<script src="lib/jquery-1.10.2.min.js"></script>
<script src="lib/colorbrewer.js"></script>
<script src="lib/d3.v3.min.js"></script>
<script src="d3.hive.v0.dev.js"></script>
<script src="hp.js"></script>
<script>
/**************************** graph creation ******************************/
// read query string, from Stackoverflow somewhere...
var queryString = {};
location.search.substr(1)
    .split("&").forEach(function(item)
            {queryString[item.split("=")[0]] = item.split("=")[1]});

["nodes", "links"].forEach(function(x) {
    if (queryString[x] !== undefined) config[x] = +queryString[x];
});
["draw_nodes", "draw_force"].forEach(function(x) {
    if (queryString[x] !== undefined) config[x] = !config[x];
});

    // write data statistics
    d3.select('div#node-stats')
        .append('p')
        .text('Node count: ' + nodes.length +
              '; link count: ' +  links.length);


$("div#data-dump").text(JSON.stringify({nodes:nodes, links:links}, null, 2));

draw_hive_plot(svg, angle, radius, nodes, links, config.draw_nodes,
    toggle_select_node, toggle_select_link, innerRadius, outerRadius, 8, 7,
    radius_assign[radius_by_what],
    axis_assign[axis_by_what],
    function(d, i, islink) {
        if (islink) d = nodes[d.source];
        return !islink ? color(d.a) : d.max_deg ? color(d.a) : "#444";
    });

draw_color_legend("node.a", function(d) {return d;}, color);

if (config.draw_force)
    draw_force_directed(nodes, links);

</script>
</body>
</html>

