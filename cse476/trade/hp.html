<!doctype html>
<html class='no-js' lang='en'>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>D3 Hive Plot, COW Data</title>
        <meta name='description' content=''>
        <meta name='viewport' content='width=device-width, initial-scale=1'>

        <link rel='apple-touch-icon' href='../../apple-touch-icon.png'>

        <link rel='stylesheet' href='../../css/normalize.css'>
        <link rel='stylesheet' href='../../css/main.css'>
        <link rel='stylesheet' href='style.css'>
        <link rel='stylesheet' href='../hp_force.css'>
        <link rel='stylesheet' href='../lasso.css'>
        <link rel="stylesheet" href="../d3_tips.css">
        <script src='../../js/vendor/modernizr-2.8.3.min.js'></script>
        <style>
        body {
            margin: 0 auto;
        }

        #all_vis {
            text-align: center;
        }
        #all_vis div {
            display: inline-block;
            text-align: center;
        }

        .link, g.grid circle{
            fill: none
        }




        </style>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class='browserupgrade'>You are using an <strong>outdated</strong> browser. Please <a href='http://browsehappy.com/'>upgrade your browser</a> to improve your experience.</p>
        <![endif]-->


    <div id="all_vis">
    <div id="hp_vis"> </div>
    </div>
    <table id='hp_controls'>
    <tr>

        <td><button id='reset_view'>Reset view</button></td>
        <td style='text-align:center;'><input id="panning" type="checkbox">panning? no lasso
        </td>

        <!--button id='prev_year'>&lt;&lt;</button>
        <button id='next_year'>&gt;&gt;</button--!>

        <td>Scale: <select id='sel_scale'></select></td>

        </tr><tr>
        <td><select id='sel_year'></select></td>
        <td>Axis assignment: <select id="axis_func">
        </select></td>
        <td>Radius assignment: <select id="radius_func">
        </select></td>
    </tr>
    </table>
    <div id="elements_info"> </div>
    <header>Hugo Rivera, 2015 <a href=../../index.html>home</a></header>

<!---script src='http://d3js.org/d3.v3.min.js'></script--!>
<script src='../lib/d3.v3.min.js'></script>
<script src='../lib/topojson.v1.min.js'></script>
<script src='../lib/colorbrewer.js'></script>
<script src='../lib/D3-Lasso-Plugin/lasso.js'></script>
<script src="../lib/d3-tip.js">   </script>
<script src='../d3.hive.v0.dev.js'></script>
<script src='../hp.js'></script>
<script src='trade_vis.js'></script>
<script>

// switch datasets using query string
// read query string, from Stackoverflow somewhere...
var queryString = {};
location.search.substr(1)
    .split('&').forEach(function(item)
            {queryString[item.split('=')[0]] = item.split('=')[1]});

var year_query = queryString.year;

if (queryString.year === undefined)
    year_query = '1870';

// TODO MAKE ONE OF THESE FOR EACH VIS
d3.select('#hp_controls select#sel_year')
    .attr('onchange',       'console.log(this.value);hhh.year(this.value)()')
    .selectAll('option')
    .data(d3.range(1870, 2001, 5))
    .enter().append('option')
    .each(function (year) {
        // select current year
        if (''+year === year_query)
            d3.select(this).attr('selected', 'selected')

        d3.select(this)
    .attr('value', function(year) { return year; })
    .text(function(year) { return year; });
    })

var hhh;

hhh = hp_vis(d3.select('#hp_vis'), data_man)
        .year(year_query);
hhh();


</script>
</body>
</html>

