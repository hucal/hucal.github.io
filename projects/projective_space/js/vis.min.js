var PI,add_to,camera,camera_far,canvas_circ,canvas_draw,canvas_line,canvas_rect,controls,controls_active,i,j,k,l,len,len1,make_line,make_p_line,make_p_point,make_plane,make_point,max,obj,r2,r2_,r2_canvas,r2_context,r2_objects,r2_resolution,r2_texture,ref,render,renderer,root_objects,s2,s2_objects,scene,time,to_canvas_color,to_ctx_coords,transform,vec3,vec3_from_array,x;for(Detector.webgl||Detector.addGetWebGLMessage,scene=new THREE.Scene,camera_far=1e4,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,camera_far),renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setSize(window.innerWidth/2,window.innerHeight/2),renderer.setClearColor(16777215,1),document.getElementById("vis").appendChild(renderer.domElement),window.addEventListener("resize",function(){return camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth/2,window.innerHeight/2)}),r2_canvas=document.createElement("canvas"),r2_resolution=1024,r2_canvas.width=r2_canvas.height=r2_resolution,r2_context=r2_canvas.getContext("2d"),canvas_draw=function(e,n){var r;return e.beginPath(),r=n.color?n.color:"#000",n.should_stroke?(e.lineWidth=n.lineWidth?n.lineWidth:2,e.strokeStyle=r,e.stroke(n)):(e.fillStyle=r,e.fill(n)),e.closePath()},vec3=function(e,n,r){return new THREE.Vector3(e,n,r)},vec3_from_array=function(e){return vec3(e[0],e[1],e.length>2?e[2]:1)},PI=Math.PI,add_to=function(e,n){return e.push(n),n},make_point=function(e,n,r,t,o){return null==t&&(t=1),null==o&&(o=15),add_to(e,new THREE.Mesh(new THREE.SphereGeometry(n,o,o),new THREE.MeshLambertMaterial({color:r,transparent:1!==t,opacity:t})))},make_plane=function(e,n,r,t){return null==t&&(t=1),add_to(e,new THREE.Mesh(new THREE.PlaneGeometry(n,n),new THREE.MeshBasicMaterial({color:r,side:THREE.DoubleSide,transparent:1!==t,opacity:t})))},make_line=function(e,n,r,t,o,a){var c,i,s,_;return null==o&&(o=1),null==a&&(a=!0),i=n instanceof THREE.Vector3?n:vec3_from_array(n),_=r instanceof THREE.Vector3?r:vec3_from_array(r),a&&(s=i.clone(),i.sub(_),i.setLength(camera_far),i.add(_),_.sub(s),_.setLength(camera_far),_.add(s)),c=new THREE.Geometry,c.vertices.push(i,_),add_to(e,new THREE.Line(c,new THREE.LineBasicMaterial({color:t,linewidth:o})))},to_ctx_coords=function(e,n){return n(r2_resolution/2*(e[0]+1),r2_resolution/2*(1-e[1]))},make_p_point=function(e,n,r){var t,o,a,c;return t=canvas_circ(r2_objects,e,n,r,6),o=make_line(root_objects,[-e,-n,-1],[e,n,1],r),a=make_point(s2_objects,.0075,r),a.position.copy(vec3(e,n,1).normalize()),c=make_point(s2_objects,.0075,r),c.position.copy(vec3(-e,-n,-1).normalize()),[[t],[o,a,c]]},to_canvas_color=function(e){return e instanceof String||"string"==typeof e?e:"#"+e.toString(16)},canvas_rect=function(e,n,r,t){var o;return o=add_to(e,new Path2D),o.color=to_canvas_color(t),to_ctx_coords(n,function(e,n){return to_ctx_coords(r,function(r,t){return o.rect(e+.5,n+.5,r-e,t-n)})}),o},canvas_circ=function(e,n,r,t,o){var a;return a=add_to(e,new Path2D),a.color=to_canvas_color(t),to_ctx_coords([n,r],function(e,n){return a.arc(e+.5,n+.5,o,0,2*PI)}),a},canvas_line=function(e,n,r,t,o){var a;return a=add_to(e,new Path2D),a.color=to_canvas_color(t),a.should_stroke=!0,a.lineWidth=o,to_ctx_coords(n,function(e,n){return a.moveTo(e,n)}),to_ctx_coords(r,function(e,n){return a.lineTo(e+.5,n+.5)}),a},make_p_line=function(e,n,r,t,o){var a,c,i,s,_;return null==t&&(t=1),null==o&&(o=!1),i=make_plane(root_objects,3,r,t),s=vec3(e[0],e[1],1),_=vec3(n[0],n[1],1),c=canvas_line(r2_objects,e,n,r,14),o&&(make_p_point(e[0],e[1],r),make_p_point(n[0],n[1],r)),s.cross(_),s.normalize(),a=s.angleTo(vec3(0,0,1)),i.rotation.setFromQuaternion((new THREE.Quaternion).setFromUnitVectors(vec3(0,0,1),s)),[c,i]},r2_objects=[],s2_objects=[],root_objects=[],canvas_rect(r2_objects,[-1,-1],[1,1],"rgba(255, 255, 255, 0)"),max=20,i=j=0,ref=max;ref>=0?ref>=j:j>=ref;i=ref>=0?++j:--j)x=1-2*i/max,canvas_line(r2_objects,[x,1],[x,-1],"black",2),canvas_line(r2_objects,[1,x],[-1,x],"black",2);for(make_plane(root_objects,2,12320699),make_p_point(0,0,16711680),make_p_point(.5,.5,16711680),make_p_line([.2,.2],[-.3,.4],16711935,.5,!0),make_p_line([-.2,-.2],[.3,-.3],16777215,.5,!0),s2=make_point(s2_objects,1,16777215,.2,90),r2_texture=new THREE.Texture(r2_canvas),r2_texture.needsUpdate=!0,r2=new THREE.Mesh(new THREE.PlaneGeometry(2,2),new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,map:r2_texture,transparent:!0})),r2.position.z=1,r2_=new THREE.Mesh(new THREE.PlaneGeometry(2,2),new THREE.MeshBasicMaterial({side:THREE.DoubleSide,map:r2_texture,transparent:!0})),transform=(new THREE.Matrix4).set(2,0,0,1,0,1,0,1,0,0,1,1,0,0,0,1),r2_.applyMatrix(transform),r2_.position.z=2,scene.add(r2),k=0,len=root_objects.length;len>k;k++)obj=root_objects[k],scene.add(obj);for(l=0,len1=r2_objects.length;len1>l;l++)obj=r2_objects[l],canvas_draw(r2_context,obj);scene.add(new THREE.AmbientLight(4210752)),scene.add(new THREE.HemisphereLight(16777215,4210752,1)),controls=new THREE.OrbitControls(camera,renderer.domElement),camera.position.z=2,time=3*-PI/4,camera.position.y=3*Math.sin(time),camera.position.x=3*Math.cos(time),camera.lookAt(vec3(0,0,0)),controls_active=!0,(render=function(){requestAnimationFrame(render),renderer.render(scene,camera),controls_active?controls.update:(time+=.005,camera.position.y=3*Math.sin(time),camera.position.x=3*Math.cos(time),camera.lookAt(vec3(0,0,0)))})();
//# sourceMappingURL=vis.min.js.map