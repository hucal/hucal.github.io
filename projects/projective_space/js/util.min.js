var PI,add_to,array2_from_vec3,canvas_line,ctx_color,ctx_coords,extend,make_line,make_p_line,make_p_point,make_plane,make_point,r2_points,r3_points,root_objects,s2_points,vec2,vec2_from_array,vec3,vec3_from_array;ctx_coords=function(e,n){var r,t,o;return r=e instanceof THREE.Vector3||e instanceof THREE.Vector2?[e.x,e.y]:e,t=r[0],o=r[1],n(r2_resolution/2*(t+1),r2_resolution/2*(1-o))},ctx_color=function(e){return e instanceof String||"string"==typeof e||(e=e.toString(16)),"#"+("000000"+e).substring(e.length)},canvas_line=function(e,n,r,t,o){var c;return null==o&&(o=[]),r=ctx_color(r),c=ctx_coords(e,function(e,n){return(new createjs.Shape).set({x:e,y:n})}),ctx_coords(e,function(e,o){return ctx_coords(n,function(n,a){return c.graphics.beginStroke(r).setStrokeStyle(t).moveTo(0,0).lineTo(n-e,a-o)})}),add_to(o,c)},PI=Math.PI,vec2=function(e,n){return new THREE.Vector2(e,n)},vec3=function(e,n,r){return new THREE.Vector3(e,n,r)},array2_from_vec3=function(e){return e instanceof THREE.Vector3?[e.x/e.z,e.y/e.z,1]:e},vec3_from_array=function(e){return e instanceof THREE.Vector3?e:vec3(e[0],e[1],e.length>2?e[2]:1)},vec2_from_array=function(e){return e instanceof THREE.Vector2?e:vec2(e[0],e[1])},add_to=function(e,n){return e.push(n),n},r2_points=[],s2_points=[],r3_points=[],root_objects=[],extend=function(e,n,r){var t;return null==r&&(r=camera_far),t=e.clone(),e.sub(n),e.setLength(r),e.add(n),n.sub(t),n.setLength(r),n.add(t),[e,n]},make_point=function(e,n,r,t,o){return null==t&&(t=1),null==o&&(o=15),add_to(e,new THREE.Mesh(new THREE.SphereGeometry(n,o,o),new THREE.MeshLambertMaterial({color:r,transparent:1!==t,opacity:t})))},make_plane=function(e,n,r,t){return null==t&&(t=1),add_to(e,new THREE.Mesh(new THREE.PlaneGeometry(n,n),new THREE.MeshBasicMaterial({color:r,side:THREE.DoubleSide,transparent:1!==t,opacity:t})))},make_line=function(e,n,r,t,o,c){var a,i,_,s;return null==o&&(o=1),null==c&&(c=!0),_=vec3_from_array(n),s=vec3_from_array(r),c&&(i=extend(_,s),_=i[0],s=i[1]),a=new THREE.Geometry,a.vertices.push(_,s),add_to(e,new THREE.Line(a,new THREE.LineBasicMaterial({color:t,linewidth:o})))},make_p_point=function(e,n){var r,t,o,c;return e=vec2_from_array(e),r=add_to(r2_points,ctx_coords(e,function(e,n){return(new createjs.Shape).set({x:e,y:n})})),r.graphics.beginFill(ctx_color(n)).drawCircle(0,0,4),t=make_line(r3_points,[-e.x,-e.y,-1],[e.x,e.y,1],n),o=make_point(s2_points,.015,n),o.position.copy(vec3(e.x,e.y,1).normalize()),c=make_point(s2_points,.015,n),c.position.copy(vec3(-e.x,-e.y,-1).normalize()),{r2:[r],s2:[o,c],r3:[t]}},make_p_line=function(e,n,r,t,o){var c,a,i,_,s,u,l,p;return null==t&&(t=1),null==o&&(o=!1),u=[vec2_from_array(e),vec2_from_array(n)],e=u[0],n=u[1],_=canvas_line(e,n,r,3,r2_points),c=a=[],o&&(c=make_p_point(e,r),a=make_p_point(n,r)),s=make_plane(r3_points,3,r,t),l=vec3(e.x,e.y,1),p=vec3(n.x,n.y,1),l.cross(p),l.normalize(),i=l.angleTo(vec3(0,0,1)),s.rotation.setFromQuaternion((new THREE.Quaternion).setFromUnitVectors(vec3(0,0,1),l)),{r2:c.r2.concat(a.r2).concat(_),s2:c.s2.concat(a.s2),r3:c.r3.concat(a.r3).concat([s])}};
//# sourceMappingURL=util.min.js.map