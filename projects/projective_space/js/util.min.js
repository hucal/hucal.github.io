var PI,add_to,array2_from_vec3,canvas_line,ctx_color,ctx_coords,extend,make_line,make_p_line,make_p_point,make_plane,make_point,r2_points,r3_points,root_objects,s2_points,vec2,vec2_from_array,vec3,vec3_from_array;ctx_coords=function(e,n){var r,t,o;return r=e instanceof THREE.Vector3||e instanceof THREE.Vector2?[e.x,e.y]:e,t=r[0],o=r[1],n(r2_resolution/2*(t+1),r2_resolution/2*(1-o))},ctx_color=function(e){return e instanceof String||"string"==typeof e||(e=e.toString(16)),"#"+("000000"+e).substring(e.length)},canvas_line=function(e,n,r,t,o){var a;return null==o&&(o=[]),r=ctx_color(r),a=ctx_coords(e,function(e,n){return(new createjs.Shape).set({x:e,y:n})}),ctx_coords(e,function(e,o){return ctx_coords(n,function(n,c){return a.graphics.beginStroke(r).setStrokeStyle(t).moveTo(0,0).lineTo(n-e,c-o)})}),add_to(o,a)},PI=Math.PI,vec2=function(e,n){return new THREE.Vector2(e,n)},vec3=function(e,n,r){return new THREE.Vector3(e,n,r)},array2_from_vec3=function(e){return e instanceof THREE.Vector3?[e.x/e.z,e.y/e.z,1]:e},vec3_from_array=function(e){return e instanceof THREE.Vector3?e:vec3(e[0],e[1],e.length>2?e[2]:1)},vec2_from_array=function(e){return e instanceof THREE.Vector2?e:vec2(e[0],e[1])},add_to=function(e,n){return e.push(n),n},r2_points=[],s2_points=[],r3_points=[],root_objects=[],extend=function(e,n,r){var t;return null==r&&(r=camera_far),t=e.clone(),e.sub(n),e.setLength(r),e.add(n),n.sub(t),n.setLength(r),n.add(t),[e,n]},make_point=function(e,n,r,t,o){return null==t&&(t=1),null==o&&(o=15),add_to(e,new THREE.Mesh(new THREE.SphereGeometry(n,o,o),new THREE.MeshLambertMaterial({color:r,transparent:1!==t,opacity:t})))},make_plane=function(e,n,r,t){return null==t&&(t=1),add_to(e,new THREE.Mesh(new THREE.PlaneGeometry(n,n),new THREE.MeshBasicMaterial({color:r,side:THREE.DoubleSide,transparent:1!==t,opacity:t})))},make_line=function(e,n,r,t,o,a){var c,i,_,s;return null==o&&(o=1),null==a&&(a=!0),_=vec3_from_array(n),s=vec3_from_array(r),a&&(i=extend(_,s),_=i[0],s=i[1]),c=new THREE.Geometry,c.vertices.push(_,s),add_to(e,new THREE.Line(c,new THREE.LineBasicMaterial({color:t,linewidth:o})))},make_p_point=function(e,n,r,t){var o,a,c,i;return null==t&&(t=!1),e=vec2_from_array(e),t||(n=e),o=add_to(r2_points,ctx_coords(n,function(e,n){return(new createjs.Shape).set({x:e,y:n})})),o.graphics.beginFill(ctx_color(r)).drawCircle(0,0,4),a=make_line(r3_points,[-e.x,-e.y,-1],[e.x,e.y,1],r),c=make_point(s2_points,.015,r),c.position.copy(vec3(e.x,e.y,1).normalize()),i=make_point(s2_points,.015,r),i.position.copy(vec3(-e.x,-e.y,-1).normalize()),{r2:[o],s2:[c,i],r3:[a]}},make_p_line=function(e,n,r,t,o,a,c,i){var _,s,l,u,p,f,m,v,E;return null==a&&(a=1),null==c&&(c=!1),null==i&&(i=!1),i||(r=e,t=n),f=[vec2_from_array(r),vec2_from_array(t)],r=f[0],t=f[1],m=[vec2_from_array(e),vec2_from_array(n)],e=m[0],n=m[1],u=canvas_line(r,t,o,3,r2_points),_=s=[],c&&(_=make_p_point(e,e,o,i),s=make_p_point(n,n,o,i)),p=make_plane(r3_points,3,o,a),v=vec3(e.x,e.y,1),E=vec3(n.x,n.y,1),v.cross(E),v.normalize(),l=v.angleTo(vec3(0,0,1)),p.rotation.setFromQuaternion((new THREE.Quaternion).setFromUnitVectors(vec3(0,0,1),v)),{r2:_.r2.concat(s.r2).concat(u),s2:_.s2.concat(s.s2),r3:_.r3.concat(s.r3).concat([p])}};
//# sourceMappingURL=util.min.js.map